= render 'modal_for_app'



-if notice
  %div{class:"alert alert-success", style:"width:950px; margin: 0 auto;"}
    %button{:class=>"close", :"data-dismiss"=>:"alert"}
      x
    =notice
%div{class:"well well-small", align:"center", style:"width:980px; margin: 0 auto;"}
  %h4 Listing projects
  = link_to 'New Project', new_project_path, class:"btn"

%table{class:"table table-striped table-bordered", style:"width:1000px; margin: 0 auto;"}
  %tr
    %th{style:"width:10px !important; background-color: rgba(204,204,204,0.7);"}
    %th=sortable "id", "ID"
    %th=sortable "client", "Client"
    %th=sortable "manager", "Manager"
    %th=sortable "name", "Name"
    %th=sortable "handle", "Handle"

    %th Actions


  - @projects.each do |project|
    %tr{id:"parent_#{project.id}"}
      %td
        %div{class:"icon-play get-list-applications", id:"#{project.id}"}
      %td= link_to(project.id, project)
      %td= check_path(project.client_name, project.client_id, path:"clients").html_safe
      %td= check_path(project.manager_name, project.manager_id, path:"managers").html_safe
      %td= project.name
      %td{id:"project_handle_#{project.id}"}= check_f(project.handle)
      %td{class:"new_app_form", id:"proj_#{project.id}", style:"display:none;"}
        .notice-admin
        = form_for(@new_app, remote:true) do |f|
          %table{class:"table table-bordered"}
            -if @new_app.errors.any?
              %div{class:"alert alert-error"}
                %a{class:"close", :"data-dismiss"=>:"alert", href:"#"}
                  &times;
                %h3= "#{pluralize(@new_app.errors.count, "error")} prohibited this post from being saved:"
                %ul
                  - @new_app.errors.full_messages.each do |msg|
                    %li= msg
            %div{class:"store", style:"display:none;"}
            = f.hidden_field :project_id, value:project.id
            %tr
              %td= f.label :product_name
              %td
                = f.text_field :product_name
                %div{id:"handle_id_store", style:"display:none;"}  
            %tr
              %td= f.label :bundle_identifier
              %td= f.text_field :bundle_identifier
            %tr
              %td= f.label :bundle_version
              %td= f.text_field :bundle_version
            %tr
              %td= f.label :relative_path
              %td
                = f.text_field :relative_path, class:"input-xlarge" 
                .relative-variant
                %div{id:"relative_store", style:"display:none;"}
            %tr
              %td= f.label :title
              %td= f.text_field :title
            %tr
              %td{colspan:"2"}= f.submit 'Save', class:"btn", id:"save-new-app"

      %td
        %div{class:"btn-group"}
          =link_to "Show", project, class:"btn"
          %button{class:"btn dropdown-toggle", :"data-toggle"=>:"dropdown"}
            %span{class:"caret"}
          %ul{class:"dropdown-menu"}
            %li= link_to 'Show', project
            %li= link_to 'Edit', edit_project_path(project)
            %li= link_to 'Destroy', project, :confirm => 'Are you sure?', :method => :delete

%div{style:'display:table; margin:0 auto;'}
  %p 
    = paginate @projects